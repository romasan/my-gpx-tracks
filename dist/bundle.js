!function(k){var n=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!q[e]||!p[e])return;for(var n in p[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(L[n]=t[n]);0==--l&&0===u&&y()}(e,t),n&&n(e,t)};var i,r=!0,x="f7345ebf808a10cac8d4",t=1e4,C={},I=[],o=[];function c(t){var n=R[t];if(!n)return U;function r(e){return n.hot.active?(R[e]?-1===R[e].parents.indexOf(t)&&R[e].parents.push(t):(I=[t],i=e),-1===n.children.indexOf(e)&&n.children.push(e)):(console.warn("[HMR] unexpected require("+e+") from disposed module "+t),I=[]),U(e)}function e(t){return{configurable:!0,enumerable:!0,get:function(){return U[t]},set:function(e){U[t]=e}}}for(var o in U)Object.prototype.hasOwnProperty.call(U,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,e(o));return r.e=function(e){return"ready"===H&&M("prepare"),u++,U.e(e).then(t,function(e){throw t(),e});function t(){u--,"prepare"===H&&(s[e]||h(e),0===u&&0===l&&y())}},r.t=function(e,t){return 1&t&&(e=r(e)),U.t(e,-2&t)},r}var a=[],H="idle";function M(e){H=e;for(var t=0;t<a.length;t++)a[t].call(null,e)}var d,L,T,l=0,u=0,s={},p={},q={};function G(e){return+e+""===e?+e:e}function f(e){if("idle"!==H)throw new Error("check() is only allowed in idle status");return r=e,M("check"),function(e){return e=e||1e4,new Promise(function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,o=U.p+""+x+".hot-update.json";r.open("GET",o,!0),r.timeout=e,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+o+" failed."));else{try{var e=JSON.parse(r.responseText)}catch(e){return void n(e)}t(e)}}})}(t).then(function(e){if(!e)return M("idle"),null;p={},s={},q=e.c,T=e.h,M("prepare");var t=new Promise(function(e,t){d={resolve:e,reject:t}});L={};return h(0),"prepare"===H&&0===u&&0===l&&y(),t})}function h(e){q[e]?(p[e]=!0,l++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=U.p+""+e+"."+x+".hot-update.js",document.head.appendChild(t)}(e)):s[e]=!0}function y(){M("ready");var t=d;if(d=null,t)if(r)Promise.resolve().then(function(){return v(r)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var n in L)Object.prototype.hasOwnProperty.call(L,n)&&e.push(G(n));t.resolve(e)}}function v(n){if("ready"!==H)throw new Error("apply() is only allowed in ready status");var e,t,r,u,o;function i(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});0<r.length;){var o=r.pop(),i=o.id,c=o.chain;if((u=R[i])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:i};if(u.hot._main)return{type:"unaccepted",chain:c,moduleId:i};for(var a=0;a<u.parents.length;a++){var d=u.parents[a],l=R[d];if(l){if(l.hot._declinedDependencies[i])return{type:"declined",chain:c.concat([d]),moduleId:i,parentId:d};-1===t.indexOf(d)&&(l.hot._acceptedDependencies[i]?(n[d]||(n[d]=[]),s(n[d],[i])):(delete n[d],t.push(d),r.push({chain:c.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}n=n||{};function c(){console.warn("[HMR] unexpected require("+f.moduleId+") to disposed module")}var a={},d=[],l={};for(var p in L)if(Object.prototype.hasOwnProperty.call(L,p)){var f;o=G(p);var h=!1,y=!1,v=!1,m="";switch((f=L[p]?i(o):{type:"disposed",moduleId:p}).chain&&(m="\nUpdate propagation: "+f.chain.join(" -> ")),f.type){case"self-declined":n.onDeclined&&n.onDeclined(f),n.ignoreDeclined||(h=new Error("Aborted because of self decline: "+f.moduleId+m));break;case"declined":n.onDeclined&&n.onDeclined(f),n.ignoreDeclined||(h=new Error("Aborted because of declined dependency: "+f.moduleId+" in "+f.parentId+m));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(f),n.ignoreUnaccepted||(h=new Error("Aborted because "+o+" is not accepted"+m));break;case"accepted":n.onAccepted&&n.onAccepted(f),y=!0;break;case"disposed":n.onDisposed&&n.onDisposed(f),v=!0;break;default:throw new Error("Unexception type "+f.type)}if(h)return M("abort"),Promise.reject(h);if(y)for(o in l[o]=L[o],s(d,f.outdatedModules),f.outdatedDependencies)Object.prototype.hasOwnProperty.call(f.outdatedDependencies,o)&&(a[o]||(a[o]=[]),s(a[o],f.outdatedDependencies[o]));v&&(s(d,[f.moduleId]),l[o]=c)}var b,g=[];for(t=0;t<d.length;t++)o=d[t],R[o]&&R[o].hot._selfAccepted&&g.push({module:o,errorHandler:R[o].hot._selfAccepted});M("dispose"),Object.keys(q).forEach(function(e){!1===q[e]&&function(e){delete installedChunks[e]}(e)});for(var w,O,_=d.slice();0<_.length;)if(o=_.pop(),u=R[o]){var j={},E=u.hot._disposeHandlers;for(r=0;r<E.length;r++)(e=E[r])(j);for(C[o]=j,u.hot.active=!1,delete R[o],delete a[o],r=0;r<u.children.length;r++){var S=R[u.children[r]];S&&0<=(b=S.parents.indexOf(o))&&S.parents.splice(b,1)}}for(o in a)if(Object.prototype.hasOwnProperty.call(a,o)&&(u=R[o]))for(O=a[o],r=0;r<O.length;r++)w=O[r],0<=(b=u.children.indexOf(w))&&u.children.splice(b,1);for(o in M("apply"),x=T,l)Object.prototype.hasOwnProperty.call(l,o)&&(k[o]=l[o]);var A=null;for(o in a)if(Object.prototype.hasOwnProperty.call(a,o)&&(u=R[o])){O=a[o];var P=[];for(t=0;t<O.length;t++)if(w=O[t],e=u.hot._acceptedDependencies[w]){if(-1!==P.indexOf(e))continue;P.push(e)}for(t=0;t<P.length;t++){e=P[t];try{e(O)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:o,dependencyId:O[t],error:e}),n.ignoreErrored||A||(A=e)}}}for(t=0;t<g.length;t++){var D=g[t];o=D.module,I=[o];try{U(o)}catch(t){if("function"==typeof D.errorHandler)try{D.errorHandler(t)}catch(e){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:o,error:e,originalError:t}),n.ignoreErrored||A||(A=e),A||(A=t)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:o,error:t}),n.ignoreErrored||A||(A=t)}}return A?(M("fail"),Promise.reject(A)):(M("idle"),new Promise(function(e){e(d)}))}var R={};function U(e){if(R[e])return R[e].exports;var t=R[e]={i:e,l:!1,exports:{},hot:function(e){var r={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==e,active:!0,accept:function(e,t){if(void 0===e)r._selfAccepted=!0;else if("function"==typeof e)r._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)r._acceptedDependencies[e[n]]=t||function(){};else r._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)r._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)r._declinedDependencies[e[t]]=!0;else r._declinedDependencies[e]=!0},dispose:function(e){r._disposeHandlers.push(e)},addDisposeHandler:function(e){r._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=r._disposeHandlers.indexOf(e);0<=t&&r._disposeHandlers.splice(t,1)},check:f,apply:v,status:function(e){if(!e)return H;a.push(e)},addStatusHandler:function(e){a.push(e)},removeStatusHandler:function(e){var t=a.indexOf(e);0<=t&&a.splice(t,1)},data:C[e]};return i=void 0,r}(e),parents:(o=I,I=[],o),children:[]};return k[e].call(t.exports,t,t.exports,c(e)),t.l=!0,t.exports}U.m=k,U.c=R,U.d=function(e,t,n){U.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},U.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},U.t=function(t,e){if(1&e&&(t=U(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(U.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)U.d(n,r,function(e){return t[e]}.bind(null,r));return n},U.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return U.d(t,"a",t),t},U.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U.p="/dist",U.h=function(){return x},c(2)(U.s=2)}([function(e,t,n){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={};function i(e){return Math.floor(Math.abs(e)+.5)*(0<=e?1:-1)}function a(e,t,n){var r=(e=i(e*n))-(t=i(t*n));r<<=1,e-t<0&&(r=~r);for(var o="";32<=r;)o+=String.fromCharCode(63+(32|31&r)),r>>=5;return o+=String.fromCharCode(r+63)}function r(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice().reverse());return t}n.decode=function(e,t){for(var n,r=0,o=0,i=0,c=[],a=0,d=0,l=null,u=Math.pow(10,t||5);r<e.length;){for(l=null,d=a=0;d|=(31&(l=e.charCodeAt(r++)-63))<<a,a+=5,32<=l;);for(n=1&d?~(d>>1):d>>1,a=d=0;d|=(31&(l=e.charCodeAt(r++)-63))<<a,a+=5,32<=l;);o+=n,i+=1&d?~(d>>1):d>>1,c.push([o/u,i/u])}return c},n.encode=function(e,t){if(!e.length)return"";for(var n=Math.pow(10,t||5),r=a(e[0][0],0,n)+a(e[0][1],0,n),o=1;o<e.length;o++){var i=e[o],c=e[o-1];r+=a(i[0],c[0],n),r+=a(i[1],c[1],n)}return r},n.fromGeoJSON=function(e,t){if(e&&"Feature"===e.type&&(e=e.geometry),!e||"LineString"!==e.type)throw new Error("Input must be a GeoJSON LineString");return n.encode(r(e.coordinates),t)},n.toGeoJSON=function(e,t){return{type:"LineString",coordinates:r(n.decode(e,t))}},"object"===t(e)&&e.exports&&(e.exports=n)}).call(this,n(1)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t);var r=n(0),f=n.n(r),o=new Promise(function(e){ymaps.ready(e)}),i=null,c=null;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=e[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.then(function(){i=new ymaps.Map("ymap",{center:[0,0],zoom:10,controls:["zoomControl"]}),ymaps.geolocation.get({provider:"browser",mapStateAutoApply:!0}).then(function(e){e.geoObjects.options.set("preset","islands#blueCircleIcon"),i.geoObjects.add(e.geoObjects)}),i.controls.add("rulerControl"),i.controls.add("typeSelector"),c=new ymaps.GeoObjectCollection,i.geoObjects.add(c)});function h(e){return s[e]||e}function u(t,e,n){e.forEach(function(e){"All"!==n&&e.type!==n||t.add(e.line)})}var s={All:"Все",Ride:"Велосипед",Walk:"Ходьба"},p=l(new URL(location.href).searchParams.entries()).reduce(function(e,t){var n=d(t,2);return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){a(t,e,n[e])})}return t}({},e,a({},n[0],n[1]))},{});if(p.code){var y=null;fetch("https://www.strava.com/oauth/token?"+[{client_id:29536,client_secret:"37c9da3a9b91852ab74f08d70259d5be24ca7a48",code:p.code,grant_type:"authorization_code"}].reduce(function(e,t){return Object.entries(t)},0).map(function(e){var t=d(e,2);return t[0]+"="+t[1]}).join("&"),{method:"POST"}).then(function(e){return e.json()}).then(function(e){return y=e.access_token,function(e,t){return fetch(e,{method:"GET",headers:new Headers({Authorization:"Bearer "+t})})}("https://www.strava.com/api/v3/athlete/activities?per_page=200".replace("{id}",e.athlete.id),y)}).then(function(e){return e.json()}).then(function(e){return e.map(function(e,t){var n=e.id,r=e.name,o=e.type,i=e.start_date,c=e.distance,a=e.elapsed_time,d=e.map,l=f.a.decode(d.summary_polyline),u=new Date(i).toString().split("GMT")[0],s=parseFloat((c/1e3).toFixed(3)),p=parseFloat((a/3600).toFixed(3));return{id:n,type:o,line:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=new ymaps.GeoObject({geometry:{type:"LineString",coordinates:e.coordinates},properties:{hintContent:e.label}},{strokeColor:e.color,strokeWidth:3,strokeOpacity:.5});return t.events.add("hover",function(e){e.originalEvent.target.options.set("strokeColor","#0000ff"),e.originalEvent.target.options.set("strokeOpacity",1),e.originalEvent.target.options.set("zIndex",999)}),t.events.add("mouseleave",function(e){e.originalEvent.target.options.set("strokeColor","#ff0000"),e.originalEvent.target.options.set("strokeOpacity",.5),e.originalEvent.target.options.set("zIndex",0)}),t}({coordinates:l,label:'\n                    <a href="https://www.strava.com/activities/'.concat(n,'" target="_blank">').concat(r,'</a>\n                    <div style="color: grey">\n                        <div>').concat(u,"</div>\n                        <div>").concat(s," км. ").concat(p," ч.</div>\n                        <div>Тип: ").concat(h(o),"</div>\n                    </div>\n                "),color:"#ff0000"})}})}).then(function(t){var e=t.reduce(function(e,t){return e.includes(t.type)?e:[].concat(l(e),[t.type])},[]);e.unshift("All");var r=e.includes("Ride")?"Ride":e[0];u(c,t,r),i.setBounds(c.getBounds());var o=document.querySelector("#types");o.children[0].remove(),e.forEach(function(n){var e=document.createElement("option");e.value=n,e.innerText=h(n)+" ("+t.reduce(function(e,t){return e+~~("All"===n||t.type===n)},0)+")",n===r&&(e.selected=!0),o.appendChild(e)}),o.addEventListener("change",function(e){c.removeAll(),u(c,t,e.target.value),i.setBounds(c.getBounds())}),document.querySelector("#showLabels").addEventListener("change",function(n){t.forEach(function(e){var t=e.line;n.target.checked?t.properties.setAll({hintContent:t.properties.getAll()._hintContent}):t.properties.setAll({_hintContent:t.properties.getAll().hintContent,hintContent:""})})})})}else location.href="https://www.strava.com/oauth/authorize?"+[{client_id:29536,redirect_uri:location.href.split("?")[0],response_type:"code",scope:"read,activity:read_all,profile:read_all,read_all"}].reduce(function(e,t){return Object.entries(t)},0).map(function(e){var t=d(e,2);return t[0]+"="+t[1]}).join("&")}]);